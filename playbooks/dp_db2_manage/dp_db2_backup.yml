# This playbook manages DB2 backups using Storage Protect.
- name: Run DB2 Query Backups from Storage protect
  hosts: "{{ target_hosts | default('all') }}"
  become: true
  vars:
    db2_operation: "query"      # Operation type: query
    db2_instance: ""            # DB2 instance name (required for correct DB2 context)
    db2_query_dbname: ""        # Database name (required for query)
    db2_query_type: ""          # Type of query: backup, log, tablespace, loadcopy
    db2_query_backup_level: ""  # Backup level for type=backup: full, incremental, delta, nonincremental
    db2_query_verbose: false    # Whether to show verbose output
  roles:
    - dp_db2_manage
